# GitHub 快速上手教程
> <i class="fas fa-exclamation-triangle"></i> 本文档还在编辑之中。![完成度-20%25-orange](shield)
> 
> 最后修改时间： 2019年7月29日
> 
> 参与编辑：[![自动化钱71吴思源](person)](@edmundwsy)，[![能动少C71尤佳睿](person)](@xjtu-blacksmith)

## 1 什么是 Git 与 GitHub？
[Git](https://git-scm.com)是一个**版本控制软件**，这类软件能够精确的记录制定目录下代码的增删变动，在必要时允许还原到原来的状态。当然，对Git而言，其还有许多特有的功能，在此暂不详述[^0]。Git并不仅仅只是一个在本地运行的软件，它能够实现分布式的版本控制——也就是说，通过一个远程的**代码托管平台**，Git可以帮助程序员实现多个分立终端上的共同开发、信息交互与同步，从而可以实现多人协作。

[GitHub](https://github.com)则正是一个基于Git而建立的**在线代码托管平台**，用户可以在其上建立属于自己或与他人共享的**代码仓库**，并在此基础上实现版本控制、团队协作，甚至开源软件发布、网站建设、文档维护等诸多超出Git固有功能以外的事情。至2019年四月，GitHub上已托管超过一亿个开源代码仓库，有超过3600万名用户活跃其中[^1]。

GitHub的出现[^2]，使我们不再担心备份与远程协作：一切提交，均有记录。

> **小结：**GitHub是这个星球上最流行的开源托管服务。让人不再担心备份与远程协作；一切提交，均有记录。

## 2 GitHub指南：如何直接使用GitHub
对于新手来说，Git是一个“高深莫测”的工具，其所提供的功能也往往显得太“高级”，有牛刀宰鸡之感。如果仅仅是希望用GitHub实现简单的文档或代码协作，则不必如此大费周折，只需要在GitHub的网页或客户端上操作就已足够了。下面针对这一部分内容作简单的讲解。

开始之前，需要先完成下面的两项工作：

- [注册GitHub](https://github.com/join)；
- 如果你希望以**小白**的身份获得GitHub的最佳体验，可以尝试[下载GitHub客户端](https://desktop.github.com)。当然，这一步可以略去不做，这样的后果是：你只能在网页上创建或上传文件，而不能建立起远程仓库与本地仓库的联系。

由于一些原因，GitHub在国内访问时速度很慢，常常掉线或中断连接。针对这种情况，你有两种选择：

1. 访问GitHub网页、上传文件时，学会更加耐心~~或者充分利用加载的时间完成泡茶、点外卖、洗衣服、写作业等闲杂事项~~；
2. 自备梯子。（[梯子是什么？](https://hanyu.baidu.com/zici/s?wd=梯子)[怎样做梯子？](https://jingyan.baidu.com/article/b87fe19e5c125d5218356836.html)[有哪些好的梯子？](https://list.tmall.com/search_product.htm?q=%CC%DD%D7%D3)）

### 2.1 Git是怎么运作的
GitHub是基于Git的代码托管平台，所以我们首先需要了解Git的运作机制。以下内容并不涉及复杂的工作原理，仅是对Git之功能的大致描摹。

首先，Git是一个版本控制系统，即可以记录一个目录（文件夹）下各个文件的增删改动情况，并允许用户回溯历史、修改或撤销之前的操作。不同的版本控制系统，对于这些功能有着不同的实现方式、不同的运作原理与不同的术语（称呼）；对Git的用户而言，需要熟悉以下一些概念。

#### 文件储存的区域

在使用Git管理代码仓库/文件夹时，存在着三个所谓的区域：工作区域（简称工作区）、暂存区域（简称暂存区）、本地仓库（简称版本库）。其中：

- **工作区**就是当前的各种文件所在的区域，就是**实实在在**地存在你的文件夹里、能从系统的窗口里看到的内容。
- **暂存区**是一个由Git通过所谓“索引文件”创设出来的**虚构区域**，其所存放的是一些被你要求“**记录在案**”但尚未确定去留的文件。例如，你在一份数据表格中新增了一条数据，希望在将来把这条记录发布到新版本中，但你还没有完成需要同时发布的其他文件。这时，你可以在Git中通过暂存操作将这条改动先记录下来，以待将来提交/发布，或仅仅只做一个暂时的记录。
- **版本库**则是Git根据当前目录的最新**版本**而创建的一个**虚构区域**，它也算是真实存在，但却是以一种我们所不能手动处理或修改的压缩文件形式存储在当前文件夹下的（存放在名为`.git`的一个隐藏文件夹中）。版本库记录着那些已经由你所正式发布的文件版本与内容。与暂存区不同的是，版本库中所记录的文件版本、改动记录已经被固结，只能撤销、删除，但不能修改。特别地，在远程平台——如GitHub上——所留存的文件，都是以版本库的形式存在的。

读者可能会问：为什么做版本控制需要三个区域来记录呢？为了方便理解，有这样一个例子可供参考：

> 假想你是一个美食博主，今天打算精心准备一桌菜，然后拍照刷赞。在准备的过程中：
> 
> - 你所烹饪出来的、摆在饭桌上的菜，真实存在，这张饭桌便是所谓的**工作区**；
> - 你是一个心思细腻的人，不光期待着结果，还随时用手机记录做饭过程中各个阶段的状况。这些由你在不同时间拍下来的照片，“记录”了你所烹饪的菜品之“改动”；而存储着这些照片的手机空间，就是所谓的**暂存区**；
> - 烹饪渐近尾声，桌上的菜品玲琅满目，你的手机里也储存了许多或好或坏的照片。这时，你可以对你的照片仔细筛选，最终挑选出一组完美的“九图大法阵”；配上一段文字说明，你轻按微博界面上的“发布”按钮，一条新的微博就经由你手机上的一个本地数据库传递到微博平台的服务器上，进而可以在整个互联网上看到。你所最终发布的这条微博，便是代码管理过程中所谓的“版本”；储存着这些微博的本地数据库和远程服务器，就是所谓的**版本库**。
> 
> 很显然，在以上三个储存区中，只有工作区储存着真正的美食；而暂存区和版本库记录的不过是照片——在代码管理过程中，相应的事物则叫做“快照”。至于为什么要在工作区与版本库之间多加上暂存区这一环节，一种理解便是：如果你用手机拍的每一张照片都会自动发布在微博上，你还敢轻易的拍照片吗？还能“仔细筛选”吗？

当然，以上的这个例子，与Git的实际运作方式仍有很大不同。最大的不同在于：在现实世界中，你不能通过手机或微博上的照片把真实的菜品还原出来；而在Git中，代码版本管理的最大意义，恰在于你总是可以由**版本库**（有时也可以是**暂存区**）还原、覆盖你的**工作区**。这样，在代码的编写过程中若出现问题，随时可以还原回之前的状态；同时，你也可以调出一段时间以前的老版本，执行对比、评价、多分支开发（从一个相同的版本结点上分道扬镳，开发出不同的软件，这是开源社区常常出现的事情）等诸多功能。

絮叨这么多废话，读者不妨通过以下这张图片来加深对这三个区域之关系的理解。

![三区示意图](https://zhouhao.me/img/git_reset_20170826.png)

<p style="text-align: center"><small>(图片来源：[Git 学习笔记 - git reset 详解](https://zhouhao.me/2017/08/27/detailed-explanation-of-git-reset/)，作者：@howzy)</small></p>

### 2.2 玩转自己的仓库
### 2.3 参与协作
### 2.4 体验GitHub客户端

## 3 Git 指南：进入深水区
在开始下面的内容之前，首先需要[下载Git](https://git-scm.com/downloads)并安装之（或许你还需要一份[安装教程](https://git-scm.com/book/zh/v2/起步-安装-Git)）。

### 3.1 本地创建
在Git页面中，输入命令

    git clone /path/to/repository 

即可创建一个本地仓库的克隆版本（从现有的仓库中拷贝）。而

    git init

可从本地创建新目录。

初始化后，会在 newrepo 目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中。

### 3.2 加入文件
    git add ./Handout3.tex

当然还有其它的选项，比如add文件夹里面所有文件

    git add --all


### 3.3 提交
    git commit -m "Adding files"

将修改提交版本库

- 工作区：就是你在电脑里能看到的目录。
- 暂存区：英文叫stage, 或index。一般存放在 ".git目录下" 下的index文件（.git/index）中，所以我们把暂存区有时也叫作索引（index）。
- 版本库：工作区有一个隐藏目录.git，这个不算工作区，而是Git的版本库。

### 3.4 与远程同步

    git remote add origin git@github.com:edmundwsy/new.git

将本地库与远程关联

    git remote remove origin

取消关联

    git clone https://github.com/qyxf/Tutorials.git

将我们远程的repo克隆至本地

    git pull

拉取远程更新，以在你的工作目录中 *获取（fetch）* 并 *合并（merge）* 远端的改动。

    git push origin master

    git push <远程主机名> <本地分支名>  <远程分支名>

即是将本地的master分支推送到远程主机origin上的对应master分支， origin 是远程主机名，

    git push -h

### 3.5 设置公钥

    git config --global user.name "My Name" 
    git config --global user.email myEmail@example.com

如果报错

```powershell
$ git push origin master                                 
git@github.com: Permission denied (publickey).
```

在GitHub设置远程公钥就可以解决这个问题

在GitHub网页端：Setting -> SSH Keys->New SSH key

- title处填写：`id_rsa.pub`
- `cat ~/.ssh/id_rsa.pub`
  - 若没有，则`ssh-keygen -t rsa`
  - 一路回车......
  - 最后，输入`ssh -T git@github.com`确认OK即可。
- 然后把这个复制到GitHub中，保存
- 再尝试就ok了

再解决不了了估计就是没有权限了。。。。。。请联系仓库管理员

### 3.6 分支


    git checkout -b feature_x

创建一个叫做“feature_x”的分支，并切换过去：

    git checkout master

切换回主分支：

    git branch -d feature_x

再把新建的分支删掉：

    git push origin <branch>

除非你将分支推送到远端仓库，不然该分支就是 *不为他人所见的*

### 3.7 合并分支


要合并其他分支到你的当前分支（例如 master），执行：

    git merge <branch>

在这两种情况下，git 都会尝试去自动合并改动。遗憾的是，这可能并非每次都成功，并可能出现*冲突（conflicts）*。 这时候就需要你修改这些文件来手动合并这些*冲突（conflicts）*。改完之后，你需要执行如下命令以将它们标记为合并成功：

    git add <filename>

在合并改动之前，你可以使用如下命令预览差异：

    git diff <source_branch> <target_branch>

### 3.8 历史记录

如果你想了解本地仓库的历史记录，最简单的命令就是使用: 

    git log

你可以添加一些参数来修改他的输出，从而得到自己想要的结果。 只看某一个人的提交记录:

    git log --author=bob

一个压缩后的每一条提交记录只占一行的输出:

    git log --pretty=oneline

或者你想通过 ASCII 艺术的树形结构来展示所有的分支, 每个分支都标示了他的名字和标签: 

    git log --graph --oneline --decorate --all

看看哪些文件改变了: 

    git log --name-status

这些只是你可以使用的参数中很小的一部分。更多的信息，参考：

    git log --help

## 4 一些问题
> 冲突怎么办？

合并分支，手动修改。建议先把自己的提交，然后`pull`，最后`commit`，可最大程度减少冲突的几率。

## 5 其它教程
以下这些教程较这里的更为详细，值得进一步阅读。

- [git 简明指南](http://rogerdudler.github.io/git-guide/index.zh.html)
- [菜鸟教程 - git教程](http://www.runoob.com/git/git-tutorial.html)
- [廖雪峰Git教程](
https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)

最后，在熟悉了GitHub的基本使用方法后，别忘了关注我们的作品！

- [钱院学辅的GitHub主页](https://github.com/qyxf)
- [钱院学辅书库（BookHub）](https://github.com/qyxf/BookHub)

<!--- 引用 --->
[^0]: 想要详细的学习Git的使用，可参考Git的官方在线教程：[Pro Git](https://gitee.com/progit/index.html)——这里提供的是[码云](https://gitee.com/)上的中文翻译。
[^1]: 数据来自于：[GitHub自述页面](https://github.com/about)，查看于2019年6月13日。
[^2]: 准确地说，Git并非较早诞生的版本控制软件，GitHub也远非最早的远程开源仓库（更早者有[SourceForge](https://sourceforge.net)、[Launchpad](https://launchpad.net/)等），但GitHub可以说是首次让**开源仓库**这个概念冲出了程序员的小圈子。